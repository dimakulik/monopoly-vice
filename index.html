<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>monopoly_tg</title>
  <style>
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:#1f2428;
      color:#fff;
      overflow:hidden;
    }

    .app{height:100%; display:grid; grid-template-columns:320px 1fr;}

    /* LEFT (players) */
    .left{
      background:#1b2024;
      padding:18px 14px;
      display:flex;
      flex-direction:column;
      gap:18px;
      overflow:hidden;
    }
    .pcard{
      background:#20262b;
      border-radius:0;
      padding:16px 16px 14px;
      position:relative;
    }
    .pcard.big{ padding:18px 16px 16px; }
    .pcard.red{ background:#e45656; }
    .lvl{
      position:absolute; left:14px; top:14px;
      width:42px; height:42px; border-radius:50%;
      display:flex; align-items:center; justify-content:center;
      background:rgba(0,0,0,0.25);
      font-weight:800;
    }
    .ava{
      width:72px; height:72px; border-radius:50%;
      background:#444; margin:6px auto 10px;
    }
    .ava.ring{ outline:4px solid rgba(255,255,255,0.08); }
    .ava.green{ outline-color:#33d46a; }
    .ava.blue{ outline-color:#3aa7ff; }
    .ava.purple{ outline-color:#b17cff; }
    .pname{ text-align:center; font-weight:800; margin-bottom:6px; }
    .pmoney{ text-align:center; font-size:28px; font-weight:900; letter-spacing:.5px; }
    .pcard:not(.big) .pmoney{ font-size:22px; }
    .swords{ margin:18px auto; font-size:44px; opacity:.9; }

    /* MID */
    .mid{ background:#2a3136; position:relative; overflow:hidden; }
    .stage{
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:12px;
    }

    /* boardWrap size is set by JS (VERY IMPORTANT) */
    .boardWrap{
      position:relative;
      width:600px;
      height:600px;
      background:#0f0f12;
    }
    canvas{ width:100%; height:100%; display:block; }

    /* CHAT overlay */
    .chat{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      bottom:16px;
      width:68%;
      height:56%;
      background:#2f363b;
      display:flex;
      flex-direction:column;
      z-index:5;
    }
    .chatLog{ flex:1 1 auto; padding:10px 12px; overflow:hidden; font-size:16px; line-height:1.4; }
    .chatBar{
      height:52px; display:flex; align-items:center; gap:10px;
      padding:8px 10px; background:#2f363b;
    }
    .scopeBtn{
      border:0; background:#3b4146; color:#fff;
      height:34px; padding:0 10px;
      font-weight:700; border-radius:4px;
    }
    #msg{
      flex:1 1 auto; height:34px;
      border:0; outline:none;
      background:#2f363b; color:#d7dde1;
      font-size:16px;
    }
    .icons{ display:flex; gap:12px; align-items:center; color:#cfd6db; font-size:18px; }
    .ico{ opacity:.9; }

    /* MOBILE: one column, players overlay (doesn't shrink board) */
    @media (max-width: 900px){
      .app{ grid-template-columns:1fr; }
      .left{
        position:fixed;
        left:10px;
        top:88px;
        width:100px;
        padding:0;
        background:transparent;
        gap:10px;
        z-index:50;
        pointer-events:none;
      }
      .pcard{ width:100px; border-radius:10px; padding:10px 8px; pointer-events:none; }
      .pcard.big{ padding:10px 8px; }
      .lvl{ display:none; }
      .ava{ width:44px; height:44px; margin:0 auto 6px; }
      .pname{ font-size:12px; margin:0 0 4px; }
      .pmoney{ font-size:14px; }
      .swords{ display:none; }

      .stage{ padding:0; }
      .chat{ width:86%; height:55%; bottom:10px; }
    }
  </style>
</head>

<body>
  <div class="app">
    <aside class="left">
      <div class="pcard big red">
        <div class="lvl">71</div>
        <div class="ava"></div>
        <div class="pname">Shnurok</div>
        <div class="pmoney">$ 15,000k</div>
      </div>

      <div class="pcard big">
        <div class="ava ring green"></div>
        <div class="pname">dimakulik</div>
        <div class="pmoney">$ 15,000k</div>
      </div>

      <div class="swords">‚öîÔ∏è</div>

      <div class="pcard">
        <div class="ava ring blue"></div>
        <div class="pname">‚≠ê –î–∏–º–∞</div>
        <div class="pmoney">$ 15,000k</div>
      </div>

      <div class="pcard">
        <div class="ava ring purple"></div>
        <div class="pname">‚≠ê Morpheus</div>
        <div class="pmoney">$ 15,000k</div>
      </div>
    </aside>

    <main class="mid">
      <div class="stage">
        <div class="boardWrap" id="boardWrap">
          <canvas id="board"></canvas>

          <div class="chat">
            <div class="chatLog" id="chatLog"></div>
            <div class="chatBar">
              <button class="scopeBtn">–í—Å–µ–º</button>
              <input id="msg" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ" />
              <div class="icons">
                <span class="ico">üò∫</span>
                <span class="ico">‚õ∂</span>
                <span class="ico">‚åÉ</span>
              </div>
            </div>
          </div>

        </div>
      </div>
    </main>
  </div>

  <script>
    const canvas = document.getElementById("board");
    const ctx = canvas.getContext("2d");
    const wrap = document.getElementById("boardWrap");
    const chatLog = document.getElementById("chatLog");

    function addLine(text, color="#cfd6db"){
      const d=document.createElement("div");
      d.textContent=text;
      d.style.color=color;
      chatLog.appendChild(d);
      if(chatLog.children.length>4) chatLog.removeChild(chatLog.firstChild);
    }

    const CORNER=120, N=9;
    const STRIPE=36, OUT=18;

    const top = [
      {logo:"", stripe:"#f0a", price:"600k"},
      {logo:"CHANEL", stripe:null, price:null, rot:true},
      {logo:"?", stripe:"#f0a", price:"600k"},
      {logo:"BOSS", stripe:null, price:null, rot:true},
      {logo:"", stripe:null, price:null},
      {logo:"", stripe:"#ef4444", price:"2,000k"},
      {logo:"adidas", stripe:"#f59e0b", price:"1,000k", rot:true},
      {logo:"?", stripe:"#f59e0b", price:"", rot:false},
      {logo:"PUMA", stripe:"#f59e0b", price:"1,000k", rot:true},
      {logo:"LACOSTE", stripe:"#f59e0b", price:"1,200k", rot:true},
    ];
    const right = [
      {logo:"C+", stripe:"#14b8a6", price:"1,400k"},
      {logo:"R*", stripe:"#ef4444", price:"1,500k"},
      {logo:"friender", stripe:"#14b8a6", price:"1,400k"},
      {logo:"bird", stripe:"#14b8a6", price:"1,600k"},
      {logo:"AUDI", stripe:"#ef4444", price:"2,000k"},
      {logo:"CocaCola", stripe:"#3b82f6", price:"1,800k"},
      {logo:"?", stripe:null, price:null},
      {logo:"pepsi", stripe:"#3b82f6", price:"1,800k"},
      {logo:"Fanta", stripe:"#3b82f6", price:"2,000k"},
    ];
    const bottom = [
      {logo:"KFC", stripe:"#38bdf8", price:"2,800k", rot:true},
      {logo:"PROVIO", stripe:"#ef4444", price:"1,500k", rot:true},
      {logo:"", stripe:"#38bdf8", price:"2,600k"},
      {logo:"", stripe:"#38bdf8", price:"2,600k"},
      {logo:"Ford", stripe:"#ef4444", price:"2,000k", rot:true},
      {logo:"BRITISH", stripe:"#22c55e", price:"2,400k", rot:true},
      {logo:"lufthansa", stripe:"#22c55e", price:"2,200k", rot:true},
      {logo:"?", stripe:null, price:null},
      {logo:"American", stripe:"#22c55e", price:"2,200k", rot:true},
    ];
    const left = [
      {logo:"NOKIA", stripe:"#64748b", price:"4,000k"},
      {logo:"?", stripe:null, price:null},
      {logo:"Apple", stripe:"#64748b", price:"3,500k"},
      {logo:"üíé", stripe:null, price:null},
      {logo:"LandRover", stripe:"#ef4444", price:"2,000k"},
      {logo:"Novotel", stripe:"#a855f7", price:"3,200k"},
      {logo:"?", stripe:null, price:null},
      {logo:"Radisson", stripe:"#a855f7", price:"3,000k"},
      {logo:"HolidayInn", stripe:"#a855f7", price:"3,000k"},
    ];

    function drawCell(x,y,w,h){
      ctx.fillStyle="#fff";
      ctx.fillRect(x,y,w,h);
      ctx.strokeStyle="#111";
      ctx.lineWidth=2;
      ctx.strokeRect(x,y,w,h);
    }
    function textInCell(x,y,w,h,label,rot=false){
      ctx.save();
      ctx.translate(x+w/2,y+h/2);
      if(rot) ctx.rotate(-Math.PI/2);
      ctx.fillStyle="#111";
      ctx.font="900 22px system-ui";
      ctx.textAlign="center";
      ctx.textBaseline="middle";
      ctx.fillText(label,0,0);
      ctx.restore();
    }
    function stripeTop(x,y,w,color,txt){
      ctx.fillStyle=color;
      ctx.fillRect(x, y-OUT, w, STRIPE+OUT);
      if(!txt) return;
      ctx.fillStyle="#fff";
      ctx.font="800 18px system-ui";
      ctx.textAlign="center";
      ctx.textBaseline="middle";
      ctx.fillText(txt, x+w/2, y-OUT/2+STRIPE/2);
    }
    function stripeBottom(x,y,w,h,color,txt){
      ctx.fillStyle=color;
      ctx.fillRect(x, y+h-STRIPE, w, STRIPE+OUT);
      if(!txt) return;
      ctx.fillStyle="#fff";
      ctx.font="800 18px system-ui";
      ctx.textAlign="center";
      ctx.textBaseline="middle";
      ctx.fillText(txt, x+w/2, y+h-STRIPE/2+OUT/2);
    }
    function stripeLeft(x,y,h,color,txt){
      ctx.fillStyle=color;
      ctx.fillRect(x-OUT, y, STRIPE+OUT, h);
      if(!txt) return;
      ctx.save();
      ctx.translate(x-OUT/2+STRIPE/2, y+h/2);
      ctx.rotate(-Math.PI/2);
      ctx.fillStyle="#fff";
      ctx.font="800 18px system-ui";
      ctx.textAlign="center";
      ctx.textBaseline="middle";
      ctx.fillText(txt, 0, 0);
      ctx.restore();
    }
    function stripeRight(x,y,w,h,color,txt){
      ctx.fillStyle=color;
      ctx.fillRect(x+w-STRIPE, y, STRIPE+OUT, h);
      if(!txt) return;
      ctx.save();
      ctx.translate(x+w-STRIPE/2+OUT/2, y+h/2);
      ctx.rotate(Math.PI/2);
      ctx.fillStyle="#fff";
      ctx.font="800 18px system-ui";
      ctx.textAlign="center";
      ctx.textBaseline="middle";
      ctx.fillText(txt, 0, 0);
      ctx.restore();
    }

    function computeBoardSide(){
      const vw = window.innerWidth;
      const vh = window.innerHeight;
      const isMobile = vw <= 900;

      if(isMobile){
        // –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –¥–µ–ª–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∫—Ä—É–ø–Ω–æ, –Ω–æ –æ—Å—Ç–∞–≤–ª—è–µ–º –º–µ—Å—Ç–æ –ø–æ–¥ –≤–µ—Ä—Ö–Ω—é—é –ø–∞–Ω–µ–ª—å Telegram
        const side = Math.floor(Math.min(vw * 0.94, (vh - 90) * 0.92));
        return Math.max(320, side);
      } else {
        // –Ω–∞ –ü–ö: –¥–æ—Å—Ç—É–ø–Ω–∞—è –æ–±–ª–∞—Å—Ç—å = —ç–∫—Ä–∞–Ω - –ª–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –æ—Ç—Å—Ç—É–ø—ã
        const leftW = 320;
        const pad = 24;
        const availW = vw - leftW - pad*2;
        const availH = vh - pad*2;
        const side = Math.floor(Math.min(availW, availH, 900));
        return Math.max(520, side);
      }
    }

    function drawBoard(side){
      // –≤—ã—Å—Ç–∞–≤–ª—è–µ–º —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–í–ê–ñ–ù–û)
      wrap.style.width = side + "px";
      wrap.style.height = side + "px";

      // DPR
      const dpr = Math.max(1, Math.min(2.5, window.devicePixelRatio || 1));
      canvas.width = Math.round(side * dpr);
      canvas.height = Math.round(side * dpr);
      canvas.style.width = side + "px";
      canvas.style.height = side + "px";
      ctx.setTransform(dpr,0,0,dpr,0,0);

      ctx.clearRect(0,0,side,side);

      // —Ñ–æ–Ω –ø–æ–ª—è
      ctx.fillStyle="#0f0f12";
      ctx.fillRect(0,0,side,side);

      const inner = side - 2*CORNER;
      const step = inner / N;

      // —É–≥–ª—ã
      drawCell(0,0,CORNER,CORNER);
      ctx.save();
      ctx.translate(CORNER/2, CORNER/2);
      ctx.fillStyle="#111"; ctx.font="900 44px system-ui";
      ctx.textAlign="center"; ctx.textBaseline="middle";
      ctx.fillText("üöÄ",0,-10);
      ctx.font="900 14px system-ui"; ctx.fillText("START",0,38);
      ctx.restore();

      drawCell(side-CORNER,0,CORNER,CORNER);
      ctx.save();
      ctx.translate(side-CORNER/2, CORNER/2);
      ctx.fillStyle="#111"; ctx.font="900 44px system-ui";
      ctx.textAlign="center"; ctx.textBaseline="middle";
      ctx.fillText("üç©",0,-10);
      ctx.font="900 14px system-ui"; ctx.fillText("GO TO",0,38);
      ctx.restore();

      drawCell(side-CORNER,side-CORNER,CORNER,CORNER);
      ctx.save();
      ctx.translate(side-CORNER/2, side-CORNER/2);
      ctx.fillStyle="#111"; ctx.font="900 44px system-ui";
      ctx.textAlign="center"; ctx.textBaseline="middle";
      ctx.fillText("üé∞",0,-10);
      ctx.font="900 14px system-ui"; ctx.fillText("JACKPOT",0,38);
      ctx.restore();

      drawCell(0,side-CORNER,CORNER,CORNER);
      ctx.save();
      ctx.translate(CORNER/2, side-CORNER/2);
      ctx.fillStyle="#111"; ctx.font="900 44px system-ui";
      ctx.textAlign="center"; ctx.textBaseline="middle";
      ctx.fillText("üëÆ",0,-10);
      ctx.font="900 14px system-ui"; ctx.fillText("IN JAIL",0,38);
      ctx.restore();

      // TOP
      for(let i=0;i<N;i++){
        const x=CORNER+i*step, y=0;
        drawCell(x,y,step,CORNER);
        const d=top[i+1]||{};
        if(d.stripe) stripeTop(x,y,step,d.stripe,d.price||"");
        if(d.logo) textInCell(x,y,step,CORNER,d.logo,true);
      }
      // RIGHT
      for(let i=0;i<N;i++){
        const x=side-CORNER, y=CORNER+i*step;
        drawCell(x,y,CORNER,step);
        const d=right[i]||{};
        if(d.stripe) stripeRight(x,y,CORNER,step,d.stripe,d.price||"");
        if(d.logo) textInCell(x,y,CORNER,step,d.logo,false);
      }
      // BOTTOM
      for(let i=0;i<N;i++){
        const x=side-CORNER-(i+1)*step, y=side-CORNER;
        drawCell(x,y,step,CORNER);
        const d=bottom[i]||{};
        if(d.stripe) stripeBottom(x,y,step,CORNER,d.stripe,d.price||"");
        if(d.logo) textInCell(x,y,step,CORNER,d.logo,true);
      }
      // LEFT
      for(let i=0;i<N;i++){
        const x=0, y=side-CORNER-(i+1)*step;
        drawCell(x,y,CORNER,step);
        const d=left[i]||{};
        if(d.stripe) stripeLeft(x,y,step,d.stripe,d.price||"");
        if(d.logo) textInCell(x,y,CORNER,step,d.logo,false);
      }

      // —Ü–µ–Ω—Ç—Ä
      ctx.fillStyle="#2f363b";
      ctx.fillRect(CORNER, CORNER, side-2*CORNER, side-2*CORNER);
    }

    function render(){
      const side = computeBoardSide();
      drawBoard(side);
    }

    // Telegram iOS –ª—é–±–∏—Ç ‚Äú–ø–æ–∑–¥–Ω–∏–π‚Äù layout ‚Äî –ø–µ—Ä–µ—Ä–∏—Å—É–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
    function renderHard(){
      render();
      setTimeout(render, 80);
      setTimeout(render, 200);
      setTimeout(render, 450);
    }

    window.addEventListener("resize", renderHard);
    window.addEventListener("orientationchange", () => setTimeout(renderHard, 200));

    addLine("MikClever1 –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç 4:5", "#ff5a5a");
    addLine("MikClever1 –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ Lacoste –∏ –∑–∞–¥—É–º—ã–≤–∞–µ—Ç—Å—è –æ –ø–æ–∫—É–ø–∫–µ", "#ff5a5a");

    renderHard();
  </script>
</body>
</html>
